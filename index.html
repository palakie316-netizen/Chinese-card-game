<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b2a1e" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="assets/icons/icon-192.png" />
  <title>PaoHuZi Trainer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1 id="title">PaoHuZi Trainer</h1>
    <div class="sub" id="subtitle">Loading‚Ä¶</div>
  </header>

  <main>
    <!-- HOME -->
    <section class="view active" id="homeView">
      <div class="grid">
        <div class="card">
          <div class="row" style="justify-content:space-between;align-items:center;">
            <div class="pill" id="modePill">Mode‚Ä¶</div>
            <div class="pill" id="voicePill">Voice‚Ä¶</div>
          </div>

          <div class="row" style="margin-top:12px;">
            <button class="primary" id="playBtn">Play (Learn While Playing)</button>
            <button id="howBtn">How to Play</button>
            <button id="glossaryBtn">Glossary</button>
            <button id="settingsBtn">Settings</button>
          </div>

          <div style="margin-top:10px;color:rgba(226,232,240,.9);font-size:13px;line-height:1.4;">
            Android tip: open the GitHub Pages link in Chrome ‚Üí menu ‚Üí <b>Add to Home screen</b>.
          </div>
        </div>

        <div class="card">
          <div style="font-weight:900;">What‚Äôs improved</div>
          <div class="sub" style="margin-top:8px;line-height:1.45;">
            ‚úÖ No left/right scrolling for your hand (it fits the screen).<br/>
            ‚úÖ Felt-table background + thin card look.<br/>
            ‚úÖ Tutorial mode gives step-by-step guidance + voice while you play.<br/>
            ‚úÖ ‚ÄúExplain hand‚Äù button tells you what your hand means.
          </div>
        </div>
      </div>
    </section>

    <!-- HOW TO PLAY -->
    <section class="view" id="howView">
      <div class="card">
        <div class="spread">
          <div>
            <div style="font-weight:900;font-size:16px;">How to Play (Basics)</div>
            <div class="sub">Tap üîä to hear the explanation.</div>
          </div>
          <button id="backFromHowBtn">Back</button>
        </div>
      </div>
      <div style="height:10px;"></div>
      <div class="grid" id="howList"></div>
    </section>

    <!-- GAME SETUP -->
    <section class="view" id="gameSetupView">
      <div class="card">
        <div class="spread">
          <div>
            <div style="font-weight:900;font-size:16px;">Start Game</div>
            <div class="sub">Choose players, Bot/Manual, and Tutorial mode.</div>
          </div>
          <button id="backFromGameSetupBtn">Back</button>
        </div>
        <hr/>
        <div class="kv">
          <div class="k">Players</div>
          <div>
            <select id="playersSelect">
              <option value="2">2 players</option>
              <option value="3" selected>3 players</option>
            </select>
          </div>

          <div class="k">Tutorial</div>
          <div>
            <label style="display:flex;gap:10px;align-items:center;">
              <input type="checkbox" id="tutorialToggle" checked />
              <span>Scripted beginner game (recommended)</span>
            </label>
          </div>
        </div>

        <div class="grid" id="playerTypesWrap" style="margin-top:10px;"></div>

        <div class="row" style="margin-top:12px;">
          <button class="primary" id="startGameBtn">Start</button>
        </div>
      </div>
    </section>

    <!-- GAME -->
    <section class="view" id="gameView">
      <div class="card guide">
        <div class="spread">
          <div>
            <div class="title">Guide</div>
            <div class="text" id="guideText">‚Ä¶</div>
          </div>
          <button id="exitGameBtn">Exit</button>
        </div>
      </div>

      <div style="height:10px;"></div>

      <div class="table">
        <div class="card">
          <div style="font-weight:900;">Table</div>
          <div class="sub" id="gameInfo">Loading‚Ä¶</div>
          <div class="sub" id="gamePhase"></div>
          <div class="sub" id="activePlayer"></div>
        </div>

        <div class="card">
          <div class="zoneTitle">Opponents</div>
          <div class="row" id="opponentsRow"></div>
        </div>

        <div class="pileRow">
          <div class="pile">
            <strong>Draw Pile</strong>
            <div class="meta"><span id="drawCount">0</span> cards</div>
            <div style="margin-top:10px;">
              <button class="primary" id="drawBtn">Draw</button>
            </div>
          </div>

          <div class="pile">
            <strong>Last Discard</strong>
            <div class="meta">Claims use this card</div>
            <div style="margin-top:10px;" id="lastDiscard"></div>
          </div>

          <div class="pile">
            <strong>Actions</strong>
            <div class="meta">For the active manual player</div>
            <div class="row" style="margin-top:10px;">
              <button class="danger" id="discardBtn">Discard Selected</button>
              <button class="good" id="explainBtn">Explain hand</button>
              <button id="checkHuBtn">Check Hu</button>
            </div>
          </div>
        </div>

        <div class="card" id="claimPanel" style="display:none;">
          <div class="zoneTitle" id="claimerLabel">Claim decision</div>
          <div class="row">
            <button id="passBtn">Pass</button>
            <button class="good" id="pengBtn">Peng</button>
            <button class="good" id="chiBtn">Chi</button>
            <select id="chiSelect" style="display:none;"></select>
          </div>
          <div class="sub" style="margin-top:8px;">
            Priority: next player may Chi/Peng. Other players may Peng.
          </div>
        </div>

        <div class="card">
          <div class="zoneTitle">Active Player Melds</div>
          <div class="melds" id="activeMelds"></div>
        </div>

        <div class="card">
          <div class="zoneTitle" id="handTitle">Active Hand</div>
          <div class="handGrid" id="activeHand"></div>
        </div>

        <div class="card">
          <div class="zoneTitle">Log</div>
          <div class="log" id="logBox"></div>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="view" id="settingsView">
      <div class="card">
        <div style="font-weight:900;font-size:16px;">Settings</div>
        <div class="sub">Saved on your device.</div>
        <hr/>
        <div class="kv">
          <div class="k">Voice</div>
          <div>
            <label style="display:flex;gap:10px;align-items:center;">
              <input type="checkbox" id="voiceToggle" />
              <span>Voice On</span>
            </label>
          </div>

          <div class="k">Auto-read</div>
          <div>
            <label style="display:flex;gap:10px;align-items:center;">
              <input type="checkbox" id="autoReadToggle" />
              <span>Speak guidance automatically</span>
            </label>
          </div>

          <div class="k">Pronunciation</div>
          <div>
            <select id="pronSelect">
              <option value="slow">Slow (with pauses)</option>
              <option value="normal">Normal</option>
            </select>
          </div>

          <div class="k">Rate</div>
          <div>
            <select id="rateSelect">
              <option value="0.8">0.8x</option>
              <option value="1.0">1.0x</option>
              <option value="1.2">1.2x</option>
            </select>
          </div>
        </div>

        <div class="row" style="margin-top:12px;">
          <button id="testVoiceBtn">Test Voice</button>
          <button class="primary" id="saveSettingsBtn">Save</button>
          <button id="backFromSettingsBtn">Back</button>
        </div>
      </div>
    </section>

    <!-- GLOSSARY -->
    <section class="view" id="glossaryView">
      <div class="card">
        <div class="spread">
          <div>
            <div style="font-weight:900;font-size:16px;">Glossary</div>
            <div class="sub">Tap üîä to hear the term.</div>
          </div>
          <button id="backFromGlossaryBtn">Back</button>
        </div>
      </div>
      <div style="height:10px;"></div>
      <div class="grid" id="termList"></div>
    </section>

  </main>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>
  <script src="app.js"></script>
</body>
</html>
